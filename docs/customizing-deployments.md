# Customizing Deployments

In this guide we will:
- talk about the different terraform configuration files bentoctl generates.
- how to customize the generated terraform files and how bentoctl + custom
  terraform files can make continuous deployment easier.
- go through an example where we will deploy a bento into AWS Lambda and
  customize the deployment

## Terraform files generated by bentoctl

Bentoctl generates the following files for terraform.
- `main.tf`: This is the file that defines the infrastructure that will be
  created. If you open the file you will see it is divided into different
  sections that define the providers, input variables, resource definitions, and
  output variables in order. If you want to make changes to the default
  resources specified or want to add your own ones, directly make the changes
  into this file. 
- `bentoctl.tfvars`: This file contains all the values specific for the current
  deployment. This file points to the version of bento that is deployed, any
  configuration values like region, number of instances, etc. This file is
  managed by bentoctl and gets modified by different operations.
- `terrafrom.tfstate` && `.terraform/`: These are generated by terraform when
  you run terraform init and terraform apply. These files store the providers
  used and state information that stores the current state of the deployment and
  of the individual resources. 

## Closer look at `main.tf`
As mentioned above, main.tf is the file that defines the resources. If you want
to modify the default deployment, this is the file you should look into.
Terraform files (.hcl files) are written in [Terraform
Language](https://www.terraform.io/language) which is a declarative,
domain-specific language. It defines the properties of the different resources.

The different resources are added from the providers.
[Providers](https://www.terraform.io/language/providers) are "plugins" that
interact with the cloud provider's APIs and create/configure the resources. Each
provider will have its own doc that will specify the resources that can be
created, available configuration options, and examples.

Let's take the example of `aws-lambda` operator. The `main.tf` file it generates
by default will use the AWS provider. You can check out the [AWS provider
documentation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)
and see the different resources that are available. 

Check the `main.tf` file an you will see resources like `aws_lambda_function`,
`aws_cloudwatch_group`, `aws_iam_role` etc. These resources are already
configured for you but you can c modify them or even add your own resources
(check out the next section for an example). 

Once `main.tf` is generated bentoctl does not perform any modifications on that
file. However, the `main.tf` has a set of variables that it depends on to
specify some of the configurations that can change between deployments.  These
variables are defined in `bentoctl.tfvars`. Each time you change the deployment
config or build a new bento to deploy, bentoctl will change the variable values
in this file in order to reflect those changes. This creates a clear separation
between the variables that bentoctl depends on but provides you with the
flexibility to modify your infrastructure however you want.

## Example
> TODO

 

